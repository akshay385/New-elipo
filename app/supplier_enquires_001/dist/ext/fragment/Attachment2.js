sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{onPress:function(t){e.show("Custom handler invoked.")},onAfterItemAdded:function(e){debugger;var t=e.getParameter("item");var o=new Date;var a=o.toISOString().split("T")[0];var n=o.toISOString().split("T")[1].slice(0,8);let r=e.oSource.oPropagatedProperties.oModels.pageInternal.mContexts["/pages/supplierenquires001::supplier_enqObjectPage/controls/fe::FormContainer::details"].oModel.oData.currentCtxt.sPath;const s=/Enquiry_no='(\d+)'/;const i=r.match(s);const l=i[1];console.log("got enquiry number",l);var c={Enquiry_no:l,mediaType:t.getMediaType(),fileName:t.getFileName(),size:t.getFileObject().size};var d={url:"/odata/v4/catalog/attachments",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(c)};return new Promise((e,t)=>{$.ajax(d).done((t,o,a)=>{debugger;e(t.ID);debugger;location.reload()}).fail(e=>{t(e)})})},onUploadCompleted:function(e){debugger},aftercancel:async function(e){debugger;let t=await cds.connect.to("/odata/v4/catalog/attachments");let o=e.oSource.oPropagatedProperties.oModels.pageInternal.mContexts["/pages/supplierenquires001::supplier_enqObjectPage/controls/fe::FormContainer::details"].oModel.oData.currentCtxt.sPath;const a=/Enquiry_no='(\d+)'/;const n=o.match(a);const r=n[1];await SELECT.from(t).where({Enquiry_no:r});console.log()},onOpenPressed:function(e){e.preventDefault();var t=e.getSource();this._fileName=t.getFileName();this._download(t).then(e=>{var t=window.URL.createObjectURL(e);var o=document.createElement("a");o.href=t;o.setAttribute("download",this._fileName);document.body.appendChild(o);o.click();document.body.removeChild(o)}).catch(e=>{console.log(e)})},_uploadContent:function(e,t){var o=`/odata/v4/catalog/attachments(${t})/content`;e.setUploadUrl(o);var a=this.byId("uploadSet");a.setHttpRequestMethod("PUT");a.uploadItem(e)}.bind(this)}});